<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no">
    <link rel="icon" href="./logo/logo.svg" type="image/x-icon">
    <link rel="shortcut icon" href="./img/logo.svg" type="image/x-icon">
    <link rel="stylesheet" href="./css/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Рулетка удачи</title>
</head>

<body>
    <div class="wrapper">
        <div class="loader"></div>
        <main class="page">
            <section class="page__roulette">
                <div class="roulette-page__container container">
                    <p class="title">Рулетка удачи</p>
                    <p class="text-medium">вращайте рулетку и выигрывайте <span>реальные призы</span></p>
                    <div class="roulette-window">
                        <div class="roulette-items">
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">15%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">10%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">20%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">30%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">40%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">50%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">60%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">70%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">80%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">90%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                            <div class="roulette-item">
                                <img src="./logo/logo.svg" alt="">
                                <div class="roulette-discount">
                                    <p class="number">100%</p>
                                    <p>скидка на все товары</p>
                                </div>
                                <p class="promocode">Промокод : SK10</p>
                                <p class="period">купон действует до 15.12.2024</p>
                                <p class="text-small">предъявите купон на скидку
                                    нашему менеджеру перед покупкой</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="start()">Вращать рулетку</button>
                </div>
            </section>
        </main>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Клонируем элементы, чтобы создать бесконечный цикл
            for (let i = 0; i < 3; i++) {
                $(".roulette-item").clone().appendTo(".roulette-items");
            }

            // Функция для запуска рулетки
            function start() {
                $('button').prop('disabled', true).addClass('disabled');

                // Сбрасываем позицию рулетки
                $('.roulette-items').css({ left: "0" });

                // Генерируем случайное число для выбора элемента
                function selfRandom(min, max) {
                    return Math.floor(Math.random() * (max - min + 1)) + min;
                }

                let itemWidth = $('.roulette-item').outerWidth();
                let gap = parseInt($('.roulette-items').css('gap'));
                let visibleItems = Math.floor($('.roulette-window').width() / (itemWidth + gap)); // Количество видимых элементов
                let centerIndex = Math.floor(visibleItems / 2); // Индекс центрального элемента

                let randomIndex = selfRandom(0, $('.roulette-item').length - 1);

                let stopPosition = randomIndex * (itemWidth + gap) - centerIndex * (itemWidth + gap);

                $('.roulette-items').animate({
                    left: -stopPosition
                }, 5000, function () {
                    $('.roulette-item').removeClass('active');
                    $('.roulette-items').find('.roulette-item').eq(randomIndex).addClass('active');

                    setTimeout(function () {
                        $('button').prop('disabled', false).removeClass('disabled');
                    }, 3000);
                });
            }

            $('button').on('click', start);
        });
    </script>
    <script src="js/main.js" defer></script>
</body>

</html>